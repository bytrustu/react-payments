<br />

<div align="center">
  <img src="https://github.com/bytrustu/near-payments/assets/39726717/32bf7adc-c7d6-486d-a2d8-c3896100519e" width="300px" alt="Near Payments ë¡œê³ " />
</div>

<br />

# Near Payments
> Next Step `ìµœì¢… ë¯¸ì…˜`ì— í™œìš©ë˜ëŠ” React í˜ì´ë¨¼ì¸  ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.
- [Near Payments ì²´í—˜í•˜ê¸°](https://near-payments.vercel.app/)

<br />

> ì´ìŠˆ ë° ê°œì„ ì‚¬í•­ ìš”ì²­ì´ ìˆëŠ” ê²½ìš°, ì•„ë˜ ë§í¬ë¥¼ í†µí•´ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.
- [ì´ìŠˆ ë“±ë¡í•˜ê¸°](https://github.com/bytrustu/near-payments/issues)

<br />
ë¯¸ì…˜ ì§„í–‰ì— ë„ì›€ì´ ë˜ì…¨ë‹¤ë©´, â­ï¸ `Star` ë¶€íƒë“œë¦½ë‹ˆë‹¤. ğŸ˜

<br />
<br />

## Requirements
```bash
"node": ">=20"
```
```bash
"peerDependencies": {
  "react": "^18.2.0",
  "react-dom": "^18.2.0"
}
```


## Install
```bash
# with Yarn
yarn install near-payments

# with Npm
npm install near-payments

# with Pnpm
pnpm install near-payments
```

<br />

## Usage

### 1. OverlayProvider ì ìš©

> OverlayProviderë¥¼ ì‚¬ìš©í•˜ì—¬ Near Payments ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë Œë”ë§í•©ë‹ˆë‹¤.  `<App />`ì„ OverlayProviderë¡œ ê°ì‹¸ì£¼ì„¸ìš”.

```tsx
import { OverlayProvider } from 'near-payments';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <OverlayProvider>
      <App />
    </OverlayProvider>
  </React.StrictMode>,
);
```

<br />

### 2. useLoadNearPayments

> useLoadNearPayments Hookì„ ì‚¬ìš©í•˜ì—¬ ì›í•˜ëŠ” ì‹œì ì— ê²°ì œ í™”ë©´ì„ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


<b>ğŸ“— useLoadNearPayments ì˜µì…˜</b>

<table>
  <thead>
  <tr>
    <th>ì†ì„±ëª…</th>
    <th>íƒ€ì…</th>
    <th>í•„ìˆ˜ ì—¬ë¶€</th>
    <th>ì„¤ëª…</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td><code>clientId</code></td>
    <td><code>string</code></td>
    <td>í•„ìˆ˜</td>
    <td>Payment Client Idë¡œ í™œìš©ë˜ëŠ” ì‹ë³„ì</td>
  </tr>
  </tbody>
</table>

```tsx
import { useLoadNearPayments } from 'near-payments';

const App = () => {
  const loadNearPayments = useLoadNearPayments({
    clientId: 'CLIENT_ID',
  });
}
```

<br />

<b>ğŸ“— loadNearPayments ì˜µì…˜</b>

<table>
  <thead>
  <tr>
    <th>ì†ì„±ëª…</th>
    <th>íƒ€ì…</th>
    <th>í•„ìˆ˜ ì—¬ë¶€</th>
    <th>ì„¤ëª…</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td><code>orderId</code></td>
    <td><code>string</code></td>
    <td>í•„ìˆ˜</td>
    <td>ì£¼ë¬¸ ë²ˆí˜¸</td>
  </tr>
  <tr>
    <td><code>totalAmount</code></td>
    <td><code>number</code></td>
    <td>í•„ìˆ˜</td>
    <td>ì´ ê²°ì œ ê¸ˆì•¡</td>
  </tr>
  <tr>
    <td><code>onPaymentComplete</code></td>
    <td><code>(paymentResult: PaymentResult) => void</code></td>
    <td>í•„ìˆ˜</td>
    <td>ê²°ì œ ì™„ë£Œ ì‹œ ì½œë°± í•¨ìˆ˜</td>
  </tr>
  <tr>
    <td><code>onPaymentCancel</code></td>
    <td><code>(paymentCancel: PaymentCancel) => void</code></td>
    <td>í•„ìˆ˜</td>
    <td>ê²°ì œ ì·¨ì†Œ ì‹œ ì½œë°± í•¨ìˆ˜</td>
  </tr>
  </tbody>
</table>

<br />

```tsx
import { PaymentCancel, PaymentResult, useLoadNearPayments } from 'near-payments';

const App = () => {
  const loadNearPayments = useLoadNearPayments({
    clientId: 'CLIENT_ID',
  });

  const openPayments = async () => {
    try {
      await loadNearPayments({
        orderId: '1234567890',
        totalAmount: 10000,
        onPaymentComplete: (paymentResult: PaymentResult) => {
          // ê²°ì œ ì™„ë£Œ ì‹œ ì²˜ë¦¬
          console.log('paymentResult:', paymentResult)
        },
        onPaymentCancel: (paymentCancel: PaymentCancel) => {
          // ê²°ì œ ì·¨ì†Œ ì‹œ ì²˜ë¦¬
          console.log('paymentCancel:', paymentCancel);
        },
      });
    } catch (error) {
      // ê²°ì œ ì¤‘ ë°œìƒí•œ ì—ëŸ¬ ì²˜ë¦¬
      console.error('Payment error:', error);
    }
  };

  return (
    <button onClick={openPayments}>ê²°ì œí•˜ê¸°</button>
  );
};
```

<br />

<b>ğŸ“˜ PaymentResult íƒ€ì…</b>

```ts
export type PaymentResult = {
  success: boolean; // ê²°ì œ ì„±ê³µ ì—¬ë¶€
  message: string; // ê²°ì œ ë©”ì‹œì§€
  orderId: string; // ì£¼ë¬¸ ë²ˆí˜¸
  totalAmount: number; // ì´ ê²°ì œ ê¸ˆì•¡
  cardNumber: string; // ê²°ì œ ì¹´ë“œ ë²ˆí˜¸
  paymentTimestamp: number; // ê²°ì œ ì‹œê°„
};
```

<br />

<b>ğŸ“˜ PaymentCancel íƒ€ì…</b>

```ts
export type PaymentCancel = {
  success: boolean; // ê²°ì œ ì„±ê³µ ì—¬ë¶€
  message: string; // ê²°ì œ ë©”ì‹œì§€
  orderId: string; // ì£¼ë¬¸ ë²ˆí˜¸
};
```

<br />

<b>ğŸ”´ ì—ëŸ¬ ì½”ë“œ</b>

<table>
  <thead>
  <tr>
    <th>ì—ëŸ¬ ì½”ë“œ</th>
    <th>ì—ëŸ¬ ë©”ì‹œì§€</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td><code>INVALID_CLIENT_ID</code></td>
    <td>ìœ íš¨í•˜ì§€ ì•Šì€ CLIENT IDì…ë‹ˆë‹¤.</td>
  </tr>
  <tr>
    <td><code>INVALID_ORDER_ID</code></td>
    <td>ìœ íš¨í•˜ì§€ ì•Šì€ ì£¼ë¬¸ ë²ˆí˜¸ì…ë‹ˆë‹¤.</td>
  </tr>
  <tr>
    <td><code>INVALID_AMOUNT</code></td>
    <td>ìœ íš¨í•˜ì§€ ì•Šì€ ê¸ˆì•¡ì…ë‹ˆë‹¤.</td>
  </tr>
  <tr>
    <td><code>INVALID_OWNER_CARDS</code></td>
    <td>ìœ íš¨í•˜ì§€ ì•Šì€ ì¹´ë“œ ì •ë³´ì…ë‹ˆë‹¤.</td>
  </tr>
  <tr>
    <td><code>INVALID_PAYMENT_COMPLETE_CALLBACK</code></td>
    <td>ê²°ì œ ì™„ë£Œ ì½œë°± í•¨ìˆ˜ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</td>
  </tr>
  <tr>
    <td><code>INVALID_PAYMENT_CANCEL_CALLBACK</code></td>
    <td>ê²°ì œ ì·¨ì†Œ ì½œë°± í•¨ìˆ˜ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</td>
  </tr>
  <tr>
    <td><code>PAYMENT_PROCESS_ERROR</code></td>
    <td>ê²°ì œ í”„ë¡œì„¸ìŠ¤ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</td>
  </tr>
  </tbody>
</table>
